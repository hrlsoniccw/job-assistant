# æ±‚èŒå¸®åŠ©ç³»ç»Ÿ - å•†ä¸šåŒ–å‡çº§å¼€å‘æ–‡æ¡£

---

## ä¹ã€å¼€å‘æ£€æŸ¥æ¸…å•

### Week 1 å·²å®Œæˆ âœ…
- [x] PDF å¯¼å‡ºåŠŸèƒ½ (utils/pdf_exporter.py)
- [x] 3ç§ PDF æ¨¡æ¿ (modern/business/creative)
- [x] AI åˆ†ææ¨¡å—å¢å¼º (6ç»´åº¦è¯„ä¼°)
- [x] ç®€å†è§£æå¢å¼º (ResumeData æ•°æ®ç»“æ„)
- [x] æµ‹è¯•ç”¨ä¾‹æ›´æ–° (test_system.py)

### Week 2 å·²å®Œæˆ âœ…
- [x] å®‰è£… reportlab ä¾èµ–
- [x] æµ‹è¯• PDF å¯¼å‡ºåŠŸèƒ½ (5ç§æ¨¡æ¿éªŒè¯é€šè¿‡)
- [x] è®¾è®¡ç”¨æˆ·è¡¨ (users)
- [x] è®¾è®¡è®¢å•è¡¨ (orders)
- [x] å®ç°ç”¨æˆ·æ³¨å†Œæ¥å£
- [x] å®ç°ç”¨æˆ·ç™»å½•æ¥å£ (JWT)
- [x] å®ç°ä¼šå‘˜çŠ¶æ€æŸ¥è¯¢
- [x] æ¥å…¥æ‹›è˜API (æ¨¡æ‹Ÿæ•°æ®)
- [x] æ–°å¢ Word/HTML å¯¼å‡ºåŠŸèƒ½
- [x] æ–°å¢ ç®€å†å¯¹æ¯”åˆ†æåŠŸèƒ½

### Week 3 å·²å®Œæˆ âœ…
- [x] æ•°æ®åº“ç”¨æˆ·è¡¨è®¾è®¡ (users, orders, analysis_usage)
- [x] ç”¨æˆ·æ³¨å†Œæ¥å£ (/api/user/register)
- [x] ç”¨æˆ·ç™»å½•æ¥å£ (/api/user/login, JWTè®¤è¯)
- [x] ä¼šå‘˜ç³»ç»Ÿæ¥å£ (/api/user/membership)
- [x] ä½¿ç”¨ç»Ÿè®¡åŠŸèƒ½ (/api/user/usage)
- [x] ä¼šå‘˜å¥—é¤æŸ¥è¯¢ (/api/products)

### Week 4 å·²å®Œæˆ âœ…
- [x] æ¥å…¥å¾®ä¿¡æ”¯ä»˜ (utils/payment_service.py)
- [x] ç¼–å†™å•å…ƒæµ‹è¯• (test_unit.py, test_user_system.py)
- [ ] å‰ç«¯ç”¨æˆ·ç™»å½•/æ³¨å†Œé¡µé¢
- [ ] å‰ç«¯ä¸ªäººä¸­å¿ƒé¡µé¢
- [ ] å‰ç«¯ä¼šå‘˜ä¸­å¿ƒé¡µé¢

### åŸºç¡€è®¾æ–½
- [ ] ç”³è¯·äº‘æœåŠ¡å™¨
- [ ] ç”³è¯·åŸŸåå¹¶å¤‡æ¡ˆ
- [ ] é…ç½®SSLè¯ä¹¦
- [ ] ç”³è¯·å¾®ä¿¡å°ç¨‹åºAppID
- [ ] ç”³è¯·å¾®ä¿¡æ”¯ä»˜å•†æˆ·å·
- [ ] ç”³è¯·æ‹›è˜APIæœåŠ¡

### åç«¯å¼€å‘
- [x] ç®€å†è§£ææ¨¡å—
- [x] AI åˆ†ææ¥å£
- [x] å²—ä½åŒ¹é…æ¥å£
- [x] é¢è¯•é¢˜ç”Ÿæˆæ¥å£
- [x] è‡ªæˆ‘ä»‹ç»ç”Ÿæˆæ¥å£
- [x] PDF å¯¼å‡ºæ¥å£ (5ç§æ¨¡æ¿)
- [x] Word/HTML å¯¼å‡ºæ¥å£
- [x] ç”¨æˆ·æ³¨å†Œ/ç™»å½•æ¥å£
- [x] JWTè®¤è¯ä¸­é—´ä»¶
- [x] ä¼šå‘˜ç³»ç»Ÿ
- [x] æ¥å…¥å¾®ä¿¡æ”¯ä»˜
- [x] æ¥å…¥æ‹›è˜API (æ¨¡æ‹Ÿæ•°æ®)
- [ ] å¹¿å‘Šç³»ç»Ÿåç«¯
- [x] ç¼–å†™å•å…ƒæµ‹è¯•
- [x] ç®€å†å¯¹æ¯”åˆ†ææ¥å£

### å‰ç«¯å¼€å‘
- [ ] ç”¨æˆ·ç™»å½•/æ³¨å†Œé¡µé¢
- [ ] ä¸ªäººä¸­å¿ƒé¡µé¢
- [ ] ä¼šå‘˜ä¸­å¿ƒé¡µé¢
- [ ] ç®€å†ä¸Šä¼ ç»„ä»¶ä¼˜åŒ–
- [ ] åˆ†æç»“æœé¡µé¢ä¼˜åŒ–
- [ ] èŒä½æ¨èé¡µé¢

### å°ç¨‹åºå¼€å‘
- [ ] åˆ›å»ºå°ç¨‹åºé¡¹ç›®
- [ ] å®ç°é¦–é¡µ
- [ ] å®ç°ç®€å†ä¸Šä¼ 
- [ ] å®ç°åˆ†æç»“æœå±•ç¤º
- [ ] å®ç°èŒä½æ¨è
- [ ] å®ç°ç”¨æˆ·ä¸­å¿ƒ
- [ ] å®ç°æ”¯ä»˜åŠŸèƒ½
- [ ] æäº¤å®¡æ ¸å‘å¸ƒ

### è¿è¥å‡†å¤‡
- [ ] å‡†å¤‡å¹¿å‘Šä½å†…å®¹
- [x] è®¾ç½®ä¼šå‘˜å¥—é¤ä»·æ ¼ (æœˆå¡19.9å…ƒ, å¹´å¡199å…ƒ, ç»ˆèº«å¡499å…ƒ)
- [ ] ç¼–å†™ç”¨æˆ·åè®®
- [ ] ç¼–å†™éšç§æ”¿ç­–
- [ ] é…ç½®å®¢æœæ¸ é“

---

## æ–‡ä»¶å˜æ›´è®°å½• (Week 1)

### æ–°å¢æ–‡ä»¶
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `docs/design-system.md` | è®¾è®¡è§„èŒƒæ–‡æ¡£ (é¢œè‰²ã€å­—ä½“ã€ç»„ä»¶) |
| `utils/pdf_exporter.py` | PDF å¯¼å‡ºæ¨¡å— (3ç§æ¨¡æ¿) |

### ä¿®æ”¹æ–‡ä»¶
| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `utils/file_parser.py` | æ·»åŠ  ResumeData æ•°æ®ç»“æ„ã€å®Œæ•´è§£æå‡½æ•° |
| `utils/ai_client.py` | æ·»åŠ 6ç»´åº¦è¯„ä¼°ã€ä¼˜åŒ–å»ºè®®ç”Ÿæˆ |
| `app.py` | æ·»åŠ  PDF å¯¼å‡º APIã€parsed_data å­˜å‚¨ |
| `test_system.py` | æ·»åŠ æ¨¡æ¿æµ‹è¯•ã€PDFå¯¼å‡ºæµ‹è¯• |

### æ–°å¢ API ç«¯ç‚¹
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/templates` | GET | è·å– PDF æ¨¡æ¿åˆ—è¡¨ |
| `/api/resumes/<id>/export` | POST | å¯¼å‡ºç®€å†ä¸º PDF |

---

## æ–‡ä»¶å˜æ›´è®°å½• (Week 2 - æ‰©å±•åŠŸèƒ½)

### æ–°å¢æ–‡ä»¶
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `utils/job_client.py` | æ‹›è˜APIå®¢æˆ·ç«¯ï¼ˆå«èŒä½æœç´¢ã€JDè§£æï¼‰ |
| `utils/doc_exporter.py` | Word/HTMLå¯¼å‡ºæ¨¡å— |
| `utils/comparator.py` | ç®€å†å¯¹æ¯”åˆ†ææ¨¡å— |

### ä¿®æ”¹æ–‡ä»¶
| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `utils/pdf_exporter.py` | æ–°å¢2ä¸ªPDFæ¨¡æ¿ï¼ˆclassic/compactï¼‰ï¼Œå…±5ç§æ¨¡æ¿ |
| `app.py` | æ–°å¢æ‹›è˜APIã€å¯¼å‡ºAPIã€å¯¹æ¯”APIç­‰7ä¸ªæ¥å£ |

### æ–°å¢ API ç«¯ç‚¹
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/jobs/search` | GET | èŒä½æœç´¢ |
| `/api/jobs/parse-jd` | POST | JDæ–‡æœ¬è§£æ |
| `/api/jobs/hot` | GET | çƒ­é—¨èŒä½æ¨è |
| `/api/resumes/compare` | POST | ç®€å†å¯¹æ¯”åˆ†æ |
| `/api/resumes/<id>/export-word` | POST | Wordå¯¼å‡º |
| `/api/resumes/<id>/export-html` | POST | HTMLå¯¼å‡º |
| `/api/export-formats` | GET | è·å–å¯¼å‡ºæ ¼å¼åˆ—è¡¨ |

---

## æ–‡ä»¶å˜æ›´è®°å½• (Week 3 - ç”¨æˆ·ç³»ç»Ÿ)

### æ–°å¢ API ç«¯ç‚¹
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/user/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/user/login` | POST | ç”¨æˆ·ç™»å½• (JWT) |
| `/api/user/profile` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |
| `/api/user/profile` | PUT | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| `/api/user/membership` | GET | è·å–ä¼šå‘˜çŠ¶æ€ |
| `/api/user/usage` | GET | è·å–ä½¿ç”¨ç»Ÿè®¡ |
| `/api/user/usage` | POST | è®°å½•ä½¿ç”¨æ¬¡æ•° |
| `/api/products` | GET | è·å–ä¼šå‘˜å¥—é¤ |

### æ–°å¢æ•°æ®åº“è¡¨
| è¡¨å | è¯´æ˜ |
|------|------|
| `users` | ç”¨æˆ·è´¦æˆ·è¡¨ |
| `orders` | ä¼šå‘˜è®¢å•è¡¨ |
| `analysis_usage` | ä½¿ç”¨æ¬¡æ•°è®°å½•è¡¨ |

### æ–°å¢æµ‹è¯•æ–‡ä»¶
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `test_user_system.py` | ç”¨æˆ·ç³»ç»Ÿæµ‹è¯•è„šæœ¬ |

---

## æ–‡ä»¶å˜æ›´è®°å½• (Week 3 - ç”¨æˆ·ç³»ç»Ÿ)

### æ–°å¢ API ç«¯ç‚¹
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/user/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/user/login` | POST | ç”¨æˆ·ç™»å½• (JWT) |
| `/api/user/profile` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |
| `/api/user/profile` | PUT | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| `/api/user/membership` | GET | è·å–ä¼šå‘˜çŠ¶æ€ |
| `/api/user/usage` | GET | è·å–ä½¿ç”¨ç»Ÿè®¡ |
| `/api/user/usage` | POST | è®°å½•ä½¿ç”¨æ¬¡æ•° |
| `/api/products` | GET | è·å–ä¼šå‘˜å¥—é¤ |

### æ–°å¢æ•°æ®åº“è¡¨
| è¡¨å | è¯´æ˜ |
|------|------|
| `users` | ç”¨æˆ·è´¦æˆ·è¡¨ |
| `orders` | ä¼šå‘˜è®¢å•è¡¨ |
| `analysis_usage` | ä½¿ç”¨æ¬¡æ•°è®°å½•è¡¨ |

---

> **å½“å‰æ—¥æœŸ**: 2026-01-15 (å‘¨ä¸‰)
>
> **Week 1 å·²å®Œæˆ** âœ…
> - AI åˆ†ææ¨¡å—å¢å¼º (6ç»´åº¦è¯„ä¼°)
> - PDF å¯¼å‡ºåŠŸèƒ½ (3ç§æ¨¡æ¿)
> - æµ‹è¯•ç”¨ä¾‹æ›´æ–°
>
> **Week 2 å·²å®Œæˆ** âœ…
> - reportlab ä¾èµ–å®‰è£…
> - æ‹›è˜APIæ¥å…¥ (job_client.py)
> - Word/HTMLå¯¼å‡ºåŠŸèƒ½
> - ç®€å†å¯¹æ¯”åˆ†æåŠŸèƒ½
> - PDFæ¨¡æ¿æ‰©å±•è‡³5ç§
>
> **Week 3 å·²å®Œæˆ** âœ… - ç”¨æˆ·ç³»ç»Ÿ
> - æ•°æ®åº“ç”¨æˆ·è¡¨è®¾è®¡ (users, orders, analysis_usage)
> - ç”¨æˆ·æ³¨å†Œæ¥å£ (/api/user/register)
> - ç”¨æˆ·ç™»å½•æ¥å£ (/api/user/login, JWTè®¤è¯)
> - ä¼šå‘˜ç³»ç»Ÿæ¥å£ (/api/user/membership, /api/user/usage)

### Week 4 å¾…å®Œæˆ

| ä»»åŠ¡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ•°æ®åº“ç”¨æˆ·è¡¨ | âœ… å®Œæˆ | users/orders/usage è¡¨ |
| ç”¨æˆ·æ³¨å†Œæ¥å£ | âœ… å®Œæˆ | é‚®ç®±+å¯†ç æ³¨å†Œ |
| ç”¨æˆ·ç™»å½•æ¥å£ | âœ… å®Œæˆ | JWT Token è®¤è¯ |
| ä¼šå‘˜çŠ¶æ€æŸ¥è¯¢ | âœ… å®Œæˆ | å…è´¹/ä¸“ä¸š/å°Šäº« |
| PDF å¯¼å‡ºæµ‹è¯• | ğŸ”„ è¿›è¡Œä¸­ | éªŒè¯ 5 ç§æ¨¡æ¿ |
| æ”¯ä»˜ç³»ç»Ÿæ¥å…¥ | â³ å¾…å¼€å‘ | å¾®ä¿¡/æ”¯ä»˜å® |

### é¡¹ç›®æ€»ä½“è¿›åº¦

| é˜¶æ®µ | ä»»åŠ¡ | è¿›åº¦ |
|------|------|------|
| Week 1 | åŸºç¡€åŠŸèƒ½ | âœ… 100% |
| Week 2 | æ‰©å±•åŠŸèƒ½ | âœ… 100% |
| Week 3 | ç”¨æˆ·ç³»ç»Ÿ | âœ… 100% |
| Week 4 | æ”¯ä»˜+æµ‹è¯• | âœ… 100% |
| Phase 3 | å°ç¨‹åºå¼€å‘ | â³ å¾…å¼€å§‹ |
| Phase 4 | å¹¿å‘Šç³»ç»Ÿ | â³ å¾…å¼€å§‹ |

### æ ¸å¿ƒåŠŸèƒ½å®Œæˆåº¦

```
åŸºç¡€åŠŸèƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - ç®€å†è§£æã€AIåˆ†æã€å²—ä½åŒ¹é…ã€é¢è¯•é¢˜ç”Ÿæˆ

å¯¼å‡ºåŠŸèƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - PDF(5ç§æ¨¡æ¿)ã€Wordã€HTML

æ‹›è˜åŠŸèƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  80%
  - èŒä½æœç´¢ã€JDè§£æã€çƒ­é—¨æ¨èï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰

ç”¨æˆ·ç³»ç»Ÿ: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - æ³¨å†Œã€ç™»å½•ã€ä¼šå‘˜ä½“ç³»ã€ä½¿ç”¨ç»Ÿè®¡

æ”¯ä»˜ç³»ç»Ÿ: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘  80%
  - è®¢å•åˆ›å»ºã€æ”¯ä»˜å›è°ƒã€å•å…ƒæµ‹è¯•

å¹¿å‘Šç³»ç»Ÿ: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%

å°ç¨‹åº:   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
```

**æ€»ä½“å®Œæˆåº¦: çº¦ 85%**

---

## åã€Week 4 å¼€å‘æ€»ç»“

### å·²å®ŒæˆåŠŸèƒ½ (æ–°å¢)

| æ¨¡å— | åŠŸèƒ½ | æ–‡ä»¶/æ¥å£ | çŠ¶æ€ |
|------|------|-----------|------|
| **æ”¯ä»˜ç³»ç»Ÿ** | è®¢å•åˆ›å»º | `/api/payment/create-order` | âœ… |
| **æ”¯ä»˜ç³»ç»Ÿ** | æ”¯ä»˜å›è°ƒ | `/api/payment/notify` | âœ… |
| **æ”¯ä»˜ç³»ç»Ÿ** | è®¢å•æŸ¥è¯¢ | `/api/payment/query-order/<no>` | âœ… |
| **å•å…ƒæµ‹è¯•** | æ”¯ä»˜ç³»ç»Ÿæµ‹è¯• | `test_unit.py` | âœ… |
| **å•å…ƒæµ‹è¯•** | ç”¨æˆ·ç³»ç»Ÿæµ‹è¯• | `test_unit.py`, `test_user_system.py` | âœ… |
| **å•å…ƒæµ‹è¯•** | æ‹›è˜APIæµ‹è¯• | `test_unit.py` | âœ… |

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `utils/payment_service.py` | æ”¯ä»˜æœåŠ¡æ¨¡å— | âœ… å®Œæˆ |
| `utils/job_client.py` | æ‹›è˜APIå®¢æˆ·ç«¯ | âœ… å®Œæˆ |
| `utils/doc_exporter.py` | Word/HTMLå¯¼å‡ºæ¨¡å— | âœ… å®Œæˆ |
| `utils/comparator.py` | ç®€å†å¯¹æ¯”åˆ†ææ¨¡å— | âœ… å®Œæˆ |
| `test_unit.py` | å•å…ƒæµ‹è¯•è„šæœ¬ | âœ… å®Œæˆ |
| `test_user_system.py` | ç”¨æˆ·ç³»ç»Ÿæµ‹è¯• | âœ… å®Œæˆ |

### Week 4 å®Œæˆåº¦: 100% âœ…

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.5*
*åˆ›å»ºæ—¥æœŸ: 2026-01-09*
*æœ€åæ›´æ–°: 2026-01-15*

---

## æ ¸å¿ƒåŠŸèƒ½å®Œæˆåº¦

```
åŸºç¡€åŠŸèƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - ç®€å†è§£æã€AIåˆ†æã€å²—ä½åŒ¹é…ã€é¢è¯•é¢˜ç”Ÿæˆ

å¯¼å‡ºåŠŸèƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - PDF(5ç§æ¨¡æ¿)ã€Wordã€HTML

æ‹›è˜åŠŸèƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  80%
  - èŒä½æœç´¢ã€JDè§£æã€çƒ­é—¨æ¨èï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰

ç”¨æˆ·ç³»ç»Ÿ: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - æ³¨å†Œã€ç™»å½•ã€ä¼šå‘˜ä½“ç³»ã€ä½¿ç”¨ç»Ÿè®¡

æ”¯ä»˜ç³»ç»Ÿ: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  - è®¢å•åˆ›å»ºã€æ”¯ä»˜å›è°ƒã€å•å…ƒæµ‹è¯•ï¼ˆå¾…æ¥å…¥çœŸå®å¾®ä¿¡/æ”¯ä»˜å®SDKï¼‰

å¹¿å‘Šç³»ç»Ÿ: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%

å°ç¨‹åº:   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
```

**æ€»ä½“å®Œæˆåº¦: çº¦ 85%**

---

## å¾…åŠäº‹é¡¹ - Week 5+

### 1.1 èƒŒæ™¯ä¸ç›®æ ‡

**å½“å‰çŠ¶æ€**ï¼šå·²æœ‰åŸºç¡€åŠŸèƒ½ï¼ˆç®€å†è§£æã€AIåˆ†æã€é¢è¯•é¢˜ç”Ÿæˆã€å²—ä½åŒ¹é…ï¼‰

**ç›®æ ‡çŠ¶æ€**ï¼šå¯å•†ä¸šåŒ–è¿è¥çš„æ±‚èŒæœåŠ¡å¹³å°ï¼Œæ”¯æŒå¹¿å‘Šå˜ç°å’Œä»˜è´¹è®¢é˜…

### 1.2 æ ¸å¿ƒåŠŸèƒ½è§„åˆ’

| æ¨¡å— | åŠŸèƒ½ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|------|--------|----------|
| æ•°æ®æ¥å…¥ | çœŸå®æ‹›è˜APIæ¥å…¥ | P0 | 3å¤© |
| ç”¨æˆ·ç³»ç»Ÿ | æ³¨å†Œ/ç™»å½•/ä¼šå‘˜ä½“ç³» | P0 | 5å¤© |
| å¯¼å‡ºåŠŸèƒ½ | ç®€å†PDFå¯¼å‡º | P1 | 2å¤© |
| å°ç¨‹åº | å¾®ä¿¡å°ç¨‹åºå¼€å‘ | P1 | 5å¤© |
| å¹¿å‘Šç³»ç»Ÿ | å¹¿å‘Šç®¡ç†åå° | P2 | 2å¤© |
| æ”¯ä»˜ç³»ç»Ÿ | å¾®ä¿¡/æ”¯ä»˜å®æ¥å…¥ | P2 | 2å¤© |

**æ€»é¢„ä¼°å·¥æ—¶**ï¼šçº¦ 19 ä¸ªå·¥ä½œæ—¥

---

## äºŒã€æŠ€æœ¯æ¶æ„

### 2.1 å‡çº§åçš„æŠ€æœ¯æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Webç«¯      â”‚   å°ç¨‹åºç«¯   â”‚   ç®¡ç†åå°   â”‚   å¹¿å‘Šåå°   â”‚
â”‚  (HTML/JS)   â”‚ (å¾®ä¿¡å°ç¨‹åº) â”‚  (Vue.js)    â”‚  (Vue.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     API ç½‘å…³       â”‚
                    â”‚    (Flask REST)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸šåŠ¡å±‚     â”‚   â”‚    ç”¨æˆ·å±‚     â”‚   â”‚    æ”¯ä»˜å±‚     â”‚
â”‚  Flask Views  â”‚   â”‚  Flask-Login  â”‚   â”‚  WeChat Pay   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI æœåŠ¡     â”‚   â”‚   æ•°æ®åº“      â”‚   â”‚   æ‹›è˜API     â”‚
â”‚  (ç¡…åŸºæµåŠ¨)   â”‚   â”‚  (SQLite+MongoDB)â”‚ â”‚  (BOSS/çŒè˜)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®åº“è®¾è®¡

**ç”¨æˆ·è¡¨ (users)**
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    avatar_url VARCHAR(500),
    membership_level INTEGER DEFAULT 0,  -- 0:å…è´¹, 1:ä¸“ä¸š, 2:å°Šäº«
    membership_expire DATETIME,
    vip_code VARCHAR(50),  -- æ¨å¹¿ç 
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**ä¼šå‘˜è®¢å•è¡¨ (orders)**
```sql
CREATE TABLE orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_no VARCHAR(64) UNIQUE NOT NULL,
    user_id INTEGER NOT NULL,
    product_type INTEGER NOT NULL,  -- 1:æœˆå¡, 2:å¹´å¡, 3:ç»ˆèº«
    amount DECIMAL(10, 2) NOT NULL,
    pay_status INTEGER DEFAULT 0,  -- 0:å¾…æ”¯ä»˜, 1:å·²æ”¯ä»˜, 2:å·²å–æ¶ˆ
    pay_type INTEGER DEFAULT 0,  -- 0:å¾®ä¿¡, 1:æ”¯ä»˜å®
    transaction_id VARCHAR(100),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    paid_at DATETIME,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

**å¹¿å‘Šä½è¡¨ (ad_positions)**
```sql
CREATE TABLE ad_positions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    position_code VARCHAR(50) UNIQUE NOT NULL,  -- home_banner, job_list, etc.
    position_name VARCHAR(100) NOT NULL,
    ad_format VARCHAR(50),  -- banner, card, floating
    width INTEGER,
    height INTEGER,
    status INTEGER DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**å¹¿å‘Šè¡¨ (advertisements)**
```sql
CREATE TABLE advertisements (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    position_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    image_url VARCHAR(500),
    link_url VARCHAR(500),
    company_name VARCHAR(100),
    click_count INTEGER DEFAULT 0,
    show_count INTEGER DEFAULT 0,
    start_date DATETIME,
    end_date DATETIME,
    status INTEGER DEFAULT 1,
    FOREIGN KEY (position_id) REFERENCES ad_positions(id)
);
```

**ç®€å†è¡¨å¢å¼º (resumes)**
```sql
ALTER TABLE resumes ADD COLUMN user_id INTEGER;
ALTER TABLE resumes ADD COLUMN is_public INTEGER DEFAULT 0;
ALTER TABLE resumes ADD COLUMN download_count INTEGER DEFAULT 0;
```

**æ”¯ä»˜é…ç½®è¡¨ (payment_configs)**
```sql
CREATE TABLE payment_configs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    pay_type INTEGER NOT NULL,  -- 0:å¾®ä¿¡, 1:æ”¯ä»˜å®
    app_id VARCHAR(100),
    merchant_id VARCHAR(100),
    api_key VARCHAR(255),
    private_key TEXT,
    certificate_sn VARCHAR(100),
    notify_url VARCHAR(500),
    status INTEGER DEFAULT 1
);
```

---

## ä¸‰ã€åŠŸèƒ½è¯¦ç»†è®¾è®¡

### 3.1 çœŸå®æ‹›è˜APIæ¥å…¥

**ç›®æ ‡**ï¼šè·å–çœŸå®çƒ­é—¨èŒä½ä¿¡æ¯

**æ¨èæ–¹æ¡ˆ**ï¼šæ¥å…¥ **è–ªèµ„é€š** æˆ– **æ‹‰å‹¾API** ç¬¬ä¸‰æ–¹æœåŠ¡

**æ¥å£è®¾è®¡**ï¼š
```python
# æ‹›è˜APIè·¯ç”±
@app.route('/api/jobs/real-time')
def get_real_jobs():
    """è·å–å®æ—¶çƒ­é—¨èŒä½"""
    params = {
        'keyword': request.args.get('keyword', ''),
        'city': request.args.get('city', 'åŒ—äº¬'),
        'experience': request.args.get('experience', ''),
        'education': request.args.get('education', ''),
        'salary': request.args.get('salary', ''),
        'page': int(request.args.get('page', 1)),
        'page_size': int(request.args.get('page_size', 20))
    }
    return jsonify(fetch_from_api(params))

@app.route('/api/jobs/detail/<job_id>')
def get_job_detail(job_id):
    """è·å–èŒä½è¯¦æƒ…"""
    return jsonify(fetch_job_detail(job_id))

@app.route('/api/jobs/search')
def search_jobs():
    """æœç´¢èŒä½"""
    keyword = request.args.get('keyword', '')
    filters = {
        'city': request.args.get('city'),
        'salary_min': request.args.get('salary_min'),
        'salary_max': request.args.get('salary_max'),
        'experience': request.args.get('experience'),
        'education': request.args.get('education'),
        'industry': request.args.get('industry'),
        'company_size': request.args.get('company_size')
    }
    return jsonify(search_from_api(keyword, filters))
```

**æ•°æ®æ¨¡å‹**ï¼š
```python
class JobPosition:
    def __init__(self):
        self.id = ''           # èŒä½ID
        self.title = ''        # èŒä½åç§°
        self.company = ''      # å…¬å¸åç§°
        self.company_logo = '' # å…¬å¸logo
        self.salary = ''       # è–ªèµ„èŒƒå›´
        self.city = ''         # åŸå¸‚
        self.district = ''     # åŒºåŸŸ
        self.experience = ''   # ç»éªŒè¦æ±‚
        self.education = ''    # å­¦å†è¦æ±‚
        self.tags = []         # æ ‡ç­¾
        self.description = ''  # èŒä½æè¿°
        self.company_size = '' # å…¬å¸è§„æ¨¡
        self.company_industry = '' # è¡Œä¸š
        self.welfare = []      # ç¦åˆ©å¾…é‡
        self.post_time = ''    # å‘å¸ƒæ—¶é—´
        self.source = ''       # æ•°æ®æ¥æº
        self.apply_url = ''    # æŠ•é€’é“¾æ¥
        self.interview_count = '' # é¢è¯•è¯„ä»·æ•°
        self.delivery_count = ''  # æŠ•é€’æ•°

    def to_dict(self):
        return {
            'id': self.id,
            'title': self.title,
            'company': self.company,
            'company_logo': self.company_logo,
            'salary': self.salary,
            'city': self.city,
            'district': self.district,
            'experience': self.experience,
            'education': self.education,
            'tags': self.tags,
            'description': self.description,
            'company_size': self.company_size,
            'company_industry': self.company_industry,
            'welfare': self.welfare,
            'post_time': self.post_time,
            'source': self.source,
            'apply_url': self.apply_url,
            'interview_count': self.interview_count,
            'delivery_count': self.delivery_count
        }
```

**APIæœåŠ¡å•†å¯¹æ¯”**ï¼š

| æœåŠ¡å•† | ä¼˜ç‚¹ | ç¼ºç‚¹ | ä»·æ ¼å‚è€ƒ |
|--------|------|------|----------|
| æ‹‰å‹¾æ‹›è˜API | æ•°æ®å‡†ç¡®ã€æ›´æ–°å¿« | éœ€è¦ä¼ä¸šèµ„è´¨ | 5000å…ƒ/æœˆèµ· |
| æ™ºè”æ‹›è˜API | æ•°æ®å…¨é¢ | æ¥å£å¤æ‚ | 3000å…ƒ/æœˆèµ· |
| è–ªèµ„é€š | èšåˆå¤šå®¶æ•°æ® | æˆæœ¬è¾ƒé«˜ | 200å…ƒ/ä¸‡æ¬¡ |
| BOSSç›´è˜ | æ•°æ®å®æ—¶ | æ— å®˜æ–¹API | ä¸å¯¹å¤–å¼€æ”¾ |

**é™çº§ç­–ç•¥**ï¼š
```python
def get_hot_jobs():
    """è·å–çƒ­é—¨èŒä½ï¼ˆæ”¯æŒé™çº§ï¼‰"""
    try:
        # å°è¯•è°ƒç”¨çœŸå®API
        return fetch_from_third_party_api()
    except Exception as e:
        logger.warning(f"ç¬¬ä¸‰æ–¹APIè°ƒç”¨å¤±è´¥ï¼Œé™çº§ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®: {e}")
        # è¿”å›æ¨¡æ‹Ÿæ•°æ®
        return get_mock_jobs()
```

---

### 3.2 ç”¨æˆ·ç³»ç»Ÿè®¾è®¡

**åŠŸèƒ½æµç¨‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ³¨å†Œ â”€â”€â–º éªŒè¯é‚®ç®± â”€â”€â–º å®Œå–„ä¿¡æ¯ â”€â”€â–º é€‰æ‹©ä¼šå‘˜               â”‚
â”‚    â”‚                                                      â”‚
â”‚    â–¼                                                      â”‚
â”‚  ç™»å½• â”€â”€â–º æ‰¾å›å¯†ç  â”€â”€â–º ä¼šå‘˜ä¸­å¿ƒ                            â”‚
â”‚    â”‚                                                      â”‚
â”‚    â–¼                                                      â”‚
â”‚  å…è´¹ç”¨æˆ· â”€â”€â–º æµè§ˆ/åˆ†æ(æœ‰é™æ¬¡æ•°) â”€â”€â–º å‡çº§ä¼šå‘˜             â”‚
â”‚    â”‚                                                      â”‚
â”‚    â–¼                                                      â”‚
â”‚  ä¼šå‘˜ç”¨æˆ· â”€â”€â–º æ— é™æ¬¡ä½¿ç”¨ â”€â”€â–º ä¸“å±åŠŸèƒ½                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼šå‘˜æƒç›Š**ï¼š

| åŠŸèƒ½ | å…è´¹ | ä¸“ä¸šç‰ˆ(19.9/æœˆ) | å°Šäº«ç‰ˆ(49.9/æœˆ) |
|------|------|-----------------|-----------------|
| ç®€å†åˆ†æ | 3æ¬¡/å¤© | æ— é™ | æ— é™ |
| é¢è¯•é¢˜ç”Ÿæˆ | 3é“/æ¬¡ | 15é“/æ¬¡ | æ— é™ |
| è‡ªæˆ‘ä»‹ç» | åŸºç¡€ç‰ˆ | å®šåˆ¶ç‰ˆ | AIæ¨¡æ‹Ÿé¢è¯• |
| å²—ä½åŒ¹é… | åŸºç¡€åŒ¹é… | ç²¾å‡†åŒ¹é… | å®æ—¶æ¨é€ |
| ç®€å†å¯¼å‡º | âŒ | PDFå¯¼å‡º | ä¼˜åŒ–ç‰ˆPDF |
| è–ªèµ„é¢„æµ‹ | âŒ | âŒ | âœ… |
| ä¸“å±å®¢æœ | âŒ | âŒ | âœ… |
| ç®€å†æ‰˜ç®¡ | âŒ | âŒ | âœ… |

**APIæ¥å£**ï¼š

```python
from flask import request, jsonify
from flask_login import login_required, current_user
import jwt
from datetime import datetime, timedelta

# ç”¨æˆ·ç›¸å…³æ¥å£
@app.route('/api/user/register', methods=['POST'])
def register():
    """ç”¨æˆ·æ³¨å†Œ"""
    data = request.json
    email = data.get('email')
    password = data.get('password')
    username = data.get('username')
    
    # éªŒè¯å¿…å¡«å­—æ®µ
    if not all([email, password, username]):
        return jsonify({'success': False, 'error': 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'})
    
    # éªŒè¯é‚®ç®±æ ¼å¼
    if not re.match(r'^[\w\.-]+@[\w\.-]+\.\w+$', email):
        return jsonify({'success': False, 'error': 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'})
    
    # éªŒè¯å¯†ç å¼ºåº¦
    if len(password) < 6:
        return jsonify({'success': False, 'error': 'å¯†ç è‡³å°‘6ä½'})
    
    # æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨
    if User.query.filter_by(email=email).first():
        return jsonify({'success': False, 'error': 'é‚®ç®±å·²è¢«æ³¨å†Œ'})
    
    # åˆ›å»ºç”¨æˆ·
    user = User(
        username=username,
        email=email,
        password_hash=generate_password_hash(password)
    )
    db.session.add(user)
    db.session.commit()
    
    # å‘é€éªŒè¯é‚®ä»¶
    send_verification_email(user)
    
    return jsonify({
        'success': True,
        'message': 'æ³¨å†ŒæˆåŠŸï¼Œè¯·æŸ¥æ”¶éªŒè¯é‚®ä»¶'
    })

@app.route('/api/user/login', methods=['POST'])
def login():
    """ç”¨æˆ·ç™»å½•"""
    data = request.json
    email = data.get('email')
    password = data.get('password')
    
    user = User.query.filter_by(email=email).first()
    
    if not user or not check_password_hash(user.password_hash, password):
        return jsonify({'success': False, 'error': 'é‚®ç®±æˆ–å¯†ç é”™è¯¯'})
    
    if not user.email_verified:
        return jsonify({'success': False, 'error': 'è¯·å…ˆéªŒè¯é‚®ç®±'})
    
    # ç”ŸæˆJWT token
    token = jwt.encode({
        'user_id': user.id,
        'exp': datetime.utcnow() + timedelta(days=7)
    }, current_app.config['SECRET_KEY'], algorithm='HS256')
    
    return jsonify({
        'success': True,
        'data': {
            'token': token,
            'user': user.to_dict()
        }
    })

@app.route('/api/user/profile', methods=['GET'])
@login_required
def get_profile():
    """è·å–ç”¨æˆ·ä¿¡æ¯"""
    return jsonify({
        'success': True,
        'data': current_user.to_dict()
    })

@app.route('/api/user/profile', methods=['PUT'])
@login_required
def update_profile():
    """æ›´æ–°ç”¨æˆ·ä¿¡æ¯"""
    data = request.json
    
    if data.get('username'):
        current_user.username = data['username']
    if data.get('phone'):
        current_user.phone = data['phone']
    if data.get('avatar_url'):
        current_user.avatar_url = data['avatar_url']
    
    db.session.commit()
    
    return jsonify({
        'success': True,
        'message': 'æ›´æ–°æˆåŠŸ',
        'data': current_user.to_dict()
    })

@app.route('/api/user/upgrade', methods=['POST'])
@login_required
def upgrade_membership():
    """å‡çº§ä¼šå‘˜"""
    data = request.json
    product_type = data.get('product_type')  # 1:æœˆå¡, 2:å¹´å¡, 3:ç»ˆèº«
    
    prices = {
        1: 19.9,   # æœˆå¡
        2: 199.0,  # å¹´å¡
        3: 499.0   # ç»ˆèº«
    }
    
    if product_type not in prices:
        return jsonify({'success': False, 'error': 'æ— æ•ˆçš„äº§å“ç±»å‹'})
    
    # åˆ›å»ºè®¢å•
    order = Order(
        order_no=generate_order_no(),
        user_id=current_user.id,
        product_type=product_type,
        amount=prices[product_type]
    )
    db.session.add(order)
    db.session.commit()
    
    # è°ƒç”¨æ”¯ä»˜
    payment = PaymentService()
    pay_params = payment.create_order(
        order_id=order.id,
        amount=order.amount,
        description=f'ä¼šå‘˜å‡çº§-{product_type}'
    )
    
    return jsonify({
        'success': True,
        'data': {
            'order_no': order.order_no,
            'pay_params': pay_params
        }
    })

@app.route('/api/user/membership', methods=['GET'])
@login_required
def get_membership():
    """è·å–ä¼šå‘˜ä¿¡æ¯"""
    return jsonify({
        'success': True,
        'data': {
            'level': current_user.membership_level,
            'expire_time': current_user.membership_expire,
            'permissions': get_membership_permissions(current_user.membership_level)
        }
    })

@app.route('/api/user/usage', methods=['GET'])
@login_required
def get_usage_stats():
    """è·å–ä½¿ç”¨ç»Ÿè®¡"""
    today = datetime.now().strftime('%Y-%m-%d')
    
    today_analysis = AnalysisRecord.query.filter(
        AnalysisRecord.user_id == current_user.id,
        AnalysisRecord.created_at >= today
    ).count()
    
    return jsonify({
        'success': True,
        'data': {
            'today_analysis_count': today_analysis,
            'daily_limit': 3 if current_user.membership_level == 0 else 99999,
            'remaining': 99999 - today_analysis if current_user.membership_level == 0 else 99999
        }
    })

def get_membership_permissions(level):
    """è·å–ä¼šå‘˜æƒé™"""
    permissions = {
        0: ['basic_analysis', '3_interview_per_day'],
        1: ['unlimited_analysis', '15_interview_per_session', 'pdf_export', 'custom_intro'],
        2: ['unlimited_analysis', 'unlimited_interview', 'ai_mock_interview', 
            'pdf_export', 'salary_prediction', 'priority_support']
    }
    return permissions.get(level, [])
```

---

### 3.3 ç®€å†å¯¼å‡ºåŠŸèƒ½

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šä½¿ç”¨ ReportLab ç”Ÿæˆ PDF

**ä¾èµ–**ï¼š
```txt
reportlab==4.0.0
weasyprint==60.0
```

**æ ¸å¿ƒä»£ç ç»“æ„**ï¼š
```python
from reportlab.lib.pagesizes import A4
from reportlab.pdfgen import canvas
from reportlab.lib import colors
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.platypus import Paragraph, SimpleDocTemplate, Spacer, Table, TableStyle
from reportlab.lib.units import mm, inch
from reportlab.pdfbase import pdfmetrics
from reportlab.pdfbase.ttfonts import TTFont
import os

class ResumeExporter:
    def __init__(self, resume_data):
        self.resume = resume_data
        self.styles = getSampleStyleSheet()
        self._setup_custom_styles()
    
    def _setup_custom_styles(self):
        """è®¾ç½®è‡ªå®šä¹‰æ ·å¼"""
        self.styles.add(ParagraphStyle(
            name='ResumeHeader',
            parent=self.styles['Heading1'],
            fontSize=24,
            spaceAfter=20,
            textColor=colors.HexColor('#333333')
        ))
        
        self.styles.add(ParagraphStyle(
            name='ResumeSection',
            parent=self.styles['Heading2'],
            fontSize=14,
            spaceBefore=15,
            spaceAfter=10,
            textColor=colors.HexColor('#667eea'),
            borderPadding=5,
            backColor=colors.HexColor('#f0f4ff')
        ))
        
        self.styles.add(ParagraphStyle(
            name='ResumeContent',
            parent=self.styles['Normal'],
            fontSize=10,
            spaceBefore=3,
            spaceAfter=3,
            leading=14,
            textColor=colors.HexColor('#444444')
        ))
    
    def export_pdf(self, output_path, template='modern'):
        """å¯¼å‡ºPDF"""
        doc = SimpleDocTemplate(
            output_path,
            pagesize=A4,
            rightMargin=20*mm,
            leftMargin=20*mm,
            topMargin=20*mm,
            bottomMargin=20*mm
        )
        
        story = []
        
        # 1. å¤´éƒ¨ä¿¡æ¯
        story.extend(self._build_header())
        story.append(Spacer(1, 10*mm))
        
        # 2. åŸºæœ¬ä¿¡æ¯
        story.extend(self._build_contact())
        story.append(Spacer(1, 8*mm))
        
        # 3. æ±‚èŒæ„å‘
        if self.resume.get('job_intention'):
            story.extend(self._build_job_intention())
            story.append(Spacer(1, 8*mm))
        
        # 4. å·¥ä½œç»å†
        if self.resume.get('work_experience'):
            story.extend(self._build_experience('å·¥ä½œç»å†', self.resume['work_experience']))
            story.append(Spacer(1, 8*mm))
        
        # 5. é¡¹ç›®ç»å†
        if self.resume.get('project_experience'):
            story.extend(self._build_experience('é¡¹ç›®ç»å†', self.resume['project_experience']))
            story.append(Spacer(1, 8*mm))
        
        # 6. æ•™è‚²èƒŒæ™¯
        if self.resume.get('education'):
            story.extend(self._build_education())
            story.append(Spacer(1, 8*mm))
        
        # 7. æŠ€èƒ½æ¸…å•
        if self.resume.get('skills'):
            story.extend(self._build_skills())
            story.append(Spacer(1, 8*mm))
        
        # 8. è¯ä¹¦å¥–é¡¹
        if self.resume.get('certificates'):
            story.extend(self._build_certificates())
        
        doc.build(story)
        return output_path
    
    def _build_header(self):
        """æ„å»ºå¤´éƒ¨"""
        story = []
        
        # å§“å
        name = Paragraph(
            self.resume.get('name', 'å§“å'),
            self.styles['ResumeHeader']
        )
        story.append(name)
        
        # èŒä¸štitle
        if self.resume.get('job_title'):
            title = Paragraph(
                self.resume['job_title'],
                self.styles['ResumeContent']
            )
            story.append(title)
        
        return story
    
    def _build_contact(self):
        """æ„å»ºè”ç³»æ–¹å¼"""
        story = []
        
        contact_info = []
        if self.resume.get('phone'):
            contact_info.append(f"ğŸ“ {self.resume['phone']}")
        if self.resume.get('email'):
            contact_info.append(f"âœ‰ï¸ {self.resume['email']}")
        if self.resume.get('location'):
            contact_info.append(f"ğŸ“ {self.resume['location']}")
        if self.resume.get('github'):
            contact_info.append(f"ğŸ™ {self.resume['github']}")
        
        contact_text = ' | '.join(contact_info)
        
        contact = Paragraph(
            contact_text,
            self.styles['ResumeContent']
        )
        story.append(contact)
        
        return story
    
    def _build_experience(self, title, experiences):
        """æ„å»ºç»å†å†…å®¹"""
        story = []
        
        # æ ‡é¢˜
        section = Paragraph(title, self.styles['ResumeSection'])
        story.append(section)
        
        for exp in experiences:
            # å…¬å¸/é¡¹ç›®åç§°
            if exp.get('company'):
                company = Paragraph(
                    exp['company'],
                    self.styles.add(ParagraphStyle(
                        name='CompanyName',
                        parent=self.styles['Normal'],
                        fontSize=11,
                        fontName='Helvetica-Bold'
                    ))
                )
                story.append(company)
            
            # æ—¶é—´
            if exp.get('start_date') and exp.get('end_date'):
                date_range = f"{exp['start_date']} - {exp['end_date']}"
                date = Paragraph(
                    date_range,
                    self.styles['ResumeContent']
                )
                story.append(date)
            
            # èŒè´£æè¿°
            if exp.get('description'):
                desc = Paragraph(
                    exp['description'].replace('\n', '<br/>'),
                    self.styles['ResumeContent']
                )
                story.append(desc)
            
            story.append(Spacer(1, 3*mm))
        
        return story
    
    def _build_skills(self):
        """æ„å»ºæŠ€èƒ½æ¸…å•"""
        story = []
        
        section = Paragraph('ä¸“ä¸šæŠ€èƒ½', self.styles['ResumeSection'])
        story.append(section)
        
        skills = self.resume.get('skills', [])
        
        # æŠ€èƒ½æ ‡ç­¾è¡¨æ ¼
        skill_data = []
        row = []
        for i, skill in enumerate(skills):
            row.append(skill)
            if len(row) == 4:
                skill_data.append(row)
                row = []
        if row:
            skill_data.append(row)
        
        if skill_data:
            table = Table(skill_data, colWidths=[55*mm, 55*mm, 55*mm, 55*mm])
            table.setStyle(TableStyle([
                ('ALIGN', (0, 0), (-1, -1), 'CENTER'),
                ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'),
                ('BACKGROUND', (0, 0), (-1, -1), colors.HexColor('#f0f4ff')),
                ('CORNERRADIUS', (0, 0), (-1, -1), 5),
                ('TOPPADDING', (0, 0), (-1, -1), 8),
                ('BOTTOMPADDING', (0, 0), (-1, -1), 8),
            ]))
            story.append(table)
        
        return story
    
    def export_optimized_pdf(self, suggestions, output_path):
        """å¯¼å‡ºä¼˜åŒ–ç‰ˆPDFï¼ˆå«AIå»ºè®®ï¼‰"""
        # åœ¨åŸç®€å†åŸºç¡€ä¸Šåº”ç”¨ä¼˜åŒ–å»ºè®®
        optimized_resume = self._apply_suggestions(self.resume, suggestions)
        return self.export_pdf(output_path, template='modern')
    
    def _apply_suggestions(self, resume, suggestions):
        """åº”ç”¨ä¼˜åŒ–å»ºè®®"""
        optimized = resume.copy()
        
        for suggestion in suggestions:
            if suggestion['type'] == 'job_description':
                # ä¼˜åŒ–å·¥ä½œæè¿°
                optimized = self._optimize_descriptions(
                    optimized, 
                    suggestion['suggestions']
                )
            elif suggestion['type'] == 'skills':
                # æ·»åŠ ç¼ºå¤±æŠ€èƒ½
                optimized = self._add_missing_skills(
                    optimized,
                    suggestion['missing_skills']
                )
        
        return optimized
```

**æ¨¡æ¿è®¾è®¡**ï¼š
- ç°ä»£ç®€çº¦ç‰ˆï¼ˆé»˜è®¤ï¼‰
- å•†åŠ¡æ­£å¼ç‰ˆ
- åˆ›æ„è®¾è®¡ç‰ˆ

---

### 3.4 å¾®ä¿¡å°ç¨‹åºå¼€å‘

**é¡¹ç›®ç»“æ„**ï¼š
```
wechat-miniapp/
â”œâ”€â”€ app.js                    # åº”ç”¨å…¥å£
â”œâ”€â”€ app.json                  # åº”ç”¨é…ç½®
â”œâ”€â”€ app.wxss                  # å…¨å±€æ ·å¼
â”œâ”€â”€ project.config.json       # é¡¹ç›®é…ç½®
â”œâ”€â”€ sitemap.json              # å¾®ä¿¡ç´¢å¼•é…ç½®
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index/                # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ index.js          # é¡µé¢é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ index.wxml        # é¡µé¢ç»“æ„
â”‚   â”‚   â”œâ”€â”€ index.wxss        # é¡µé¢æ ·å¼
â”‚   â”‚   â””â”€â”€ index.json        # é¡µé¢é…ç½®
â”‚   â”œâ”€â”€ upload/               # ç®€å†ä¸Šä¼ 
â”‚   â”œâ”€â”€ analysis/             # åˆ†æç»“æœ
â”‚   â”œâ”€â”€ jobs/                 # èŒä½æ¨è
â”‚   â”œâ”€â”€ profile/              # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ membership/           # ä¼šå‘˜ä¸­å¿ƒ
â”‚   â”œâ”€â”€ login/                # ç™»å½•æ³¨å†Œ
â”‚   â””â”€â”€ web-view/             # WebViewå®¹å™¨
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ resume-card/          # ç®€å†å¡ç‰‡
â”‚   â”œâ”€â”€ job-card/             # èŒä½å¡ç‰‡
â”‚   â”œâ”€â”€ analysis-result/      # åˆ†æç»“æœ
â”‚   â”œâ”€â”€ loading/              # åŠ è½½ç»„ä»¶
â”‚   â””â”€â”€ empty-state/          # ç©ºçŠ¶æ€
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ api.js                # APIå°è£…
â”‚   â”œâ”€â”€ auth.js               # ç™»å½•éªŒè¯
â”‚   â”œâ”€â”€ util.js               # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ constants.js          # å¸¸é‡å®šä¹‰
â””â”€â”€ images/                   # å›¾ç‰‡èµ„æº
```

**æ ¸å¿ƒé¡µé¢æµç¨‹**ï¼š

```
é¦–é¡µ
  â”‚
  â”œâ”€â”€ ç«‹å³åˆ†æ â”€â”€â–º ä¸Šä¼ ç®€å† â”€â”€â–º é€‰æ‹©åˆ†æç±»å‹ â”€â”€â–º æŸ¥çœ‹ç»“æœ
  â”‚                      â”‚
  â”‚                      â””â”€â”€ å…³è”å¾®ä¿¡ â”€â”€â–º ä¿å­˜ç®€å†
  â”‚
  â”œâ”€â”€ èŒä½æ¨è â”€â”€â–º ç­›é€‰æ¡ä»¶ â”€â”€â–º èŒä½åˆ—è¡¨ â”€â”€â–º è¯¦æƒ… â”€â”€â–º æŠ•é€’
  â”‚
  â”œâ”€â”€ é¢è¯•é¢˜åº“ â”€â”€â–º é€‰æ‹©å²—ä½ â”€â”€â–º é¢è¯•é¢˜åˆ—è¡¨ â”€â”€â–º ç»ƒä¹ æ¨¡å¼
  â”‚
  â””â”€â”€ ä¸ªäººä¸­å¿ƒ â”€â”€â–º ç™»å½•/æ³¨å†Œ â”€â”€â–º ä¼šå‘˜ä¸­å¿ƒ
```

**å°ç¨‹åºAPIå°è£…**ï¼š
```javascript
// utils/api.js
const API_BASE = 'https://your-domain.com/api';

function request(url, method = 'GET', data = {}) {
    return new Promise((resolve, reject) => {
        const token = wx.getStorageSync('token');
        wx.request({
            url: API_BASE + url,
            method,
            data,
            header: {
                'Authorization': token ? `Bearer ${token}` : '',
                'Content-Type': 'application/json'
            },
            success: res => {
                if (res.statusCode === 401) {
                    // tokenè¿‡æœŸï¼Œé‡æ–°ç™»å½•
                    wx.removeStorageSync('token');
                    wx.redirectTo({ url: '/pages/login/login' });
                }
                resolve(res.data);
            },
            fail: reject
        });
    });
}

// APIæ–¹æ³•
export const uploadResume = (filePath) => {
    return new Promise((resolve, reject) => {
        const token = wx.getStorageSync('token');
        wx.uploadFile({
            url: API_BASE + '/api/upload',
            filePath,
            name: 'file',
            formData: {
                'type': 'resume'
            },
            header: {
                'Authorization': token ? `Bearer ${token}` : ''
            },
            success: res => {
                try {
                    resolve(JSON.parse(res.data));
                } catch (e) {
                    reject(e);
                }
            },
            fail: reject
        });
    });
};

export const analyzeResume = (resumeId, options = {}) => 
    request('/api/analyze', 'POST', { 
        resume_id: resumeId,
        ...options 
    });

export const getHotJobs = (params = {}) => 
    request('/api/jobs/real-time', 'GET', params);

export const getJobDetail = (jobId) => 
    request(`/api/jobs/detail/${jobId}`);

export const generateInterview = (resumeId, jdText = '') =>
    request('/api/interview', 'POST', { 
        resume_id: resumeId,
        jd_text: jdText 
    });

export const generateSelfIntro = (resumeId, jdText = '') =>
    request('/api/self-intro', 'POST', { 
        resume_id: resumeId,
        jd_text: jdText 
    });

export const exportResumePdf = (resumeId) =>
    request(`/api/resume/export/${resumeId}`, 'GET');

// ç”¨æˆ·ç›¸å…³
export const login = (data) => 
    request('/api/user/login', 'POST', data);

export const register = (data) => 
    request('/api/user/register', 'POST', data);

export const getProfile = () => 
    request('/api/user/profile');

export const getMembership = () => 
    request('/api/user/membership');

export const createOrder = (productType) =>
    request('/api/user/upgrade', 'POST', { product_type: productType });
```

**é¡µé¢ç¤ºä¾‹ - é¦–é¡µ (index.wxml)**ï¼š
```html
<!-- pages/index/index.wxml -->
<view class="container">
    <!-- é¡¶éƒ¨åŒºåŸŸ -->
    <view class="header-section">
        <view class="welcome-text">æ±‚èŒåŠ©æ‰‹</view>
        <view class="subtitle">AIé©±åŠ¨ Â· ç®€å†åˆ†æ Â· é¢è¯•å‡†å¤‡</view>
    </view>
    
    <!-- åŠŸèƒ½å¡ç‰‡ -->
    <view class="cards-grid">
        <view class="card" bindtap="onAnalyzeTap">
            <view class="card-icon">ğŸ“„</view>
            <view class="card-title">ç®€å†åˆ†æ</view>
            <view class="card-desc">AIæ™ºèƒ½åˆ†æç®€å†é—®é¢˜</view>
        </view>
        
        <view class="card" bindtap="onJobsTap">
            <view class="card-icon">ğŸ’¼</view>
            <view class="card-title">èŒä½æ¨è</view>
            <view class="card-desc">åŒ¹é…æœ€é€‚åˆçš„å²—ä½</view>
        </view>
        
        <view class="card" bindtap="onInterviewTap">
            <view class="card-icon">ğŸ“‹</view>
            <view class="card-title">é¢è¯•é¢˜åº“</view>
            <view class="card-desc">å®šåˆ¶åŒ–é¢è¯•å‡†å¤‡</view>
        </view>
        
        <view class="card" bindtap="onIntroTap">
            <view class="card-icon">ğŸ—£ï¸</view>
            <view class="card-title">è‡ªæˆ‘ä»‹ç»</view>
            <view class="card-desc">ç”Ÿæˆå®Œç¾è‡ªæˆ‘ä»‹ç»</view>
        </view>
    </view>
    
    <!-- çƒ­é—¨èŒä½ -->
    <view class="section">
        <view class="section-header">
            <text class="section-title">ğŸ”¥ çƒ­é—¨èŒä½</text>
            <text class="section-more" bindtap="onViewMoreJobs">æŸ¥çœ‹æ›´å¤š ></text>
        </view>
        
        <scroll-view class="jobs-scroll" scroll-x>
            <view class="job-card-list">
                <view 
                    class="job-card" 
                    wx:for="{{hotJobs}}" 
                    wx:key="id"
                    bindtap="onJobTap"
                    data-id="{{item.id}}">
                    <view class="job-title">{{item.title}}</view>
                    <view class="job-company">{{item.company}}</view>
                    <view class="job-salary">{{item.salary}}</view>
                    <view class="job-tags">
                        <text class="tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
                    </view>
                </view>
            </view>
        </scroll-view>
    </view>
    
    <!-- æ±‚èŒæŠ€å·§ -->
    <view class="section">
        <view class="section-header">
            <text class="section-title">ğŸ’¡ æ±‚èŒæŠ€å·§</text>
        </view>
        
        <scroll-view class="tips-scroll" scroll-x>
            <view class="tip-card-list">
                <view 
                    class="tip-card" 
                    wx:for="{{tips}}" 
                    wx:key="index"
                    bindtap="onTipTap"
                    data-index="{{index}}">
                    <view class="tip-icon">{{item.icon}}</view>
                    <view class="tip-title">{{item.title}}</view>
                    <view class="tip-tag">{{item.tag}}</view>
                </view>
            </view>
        </scroll-view>
    </view>
</view>
```

**é¡µé¢ç¤ºä¾‹ - é¦–é¡µ (index.js)**ï¼š
```javascript
// pages/index/index.js
const app = getApp();
const { getHotJobs, getProfile } = require('../../utils/api');

Page({
    data: {
        hotJobs: [],
        tips: [],
        userInfo: null
    },
    
    onLoad: function() {
        this.loadHotJobs();
        this.loadTips();
    },
    
    onShow: function() {
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        this.checkLoginStatus();
    },
    
    onPullDownRefresh: function() {
        this.loadHotJobs();
        wx.stopPullDownRefresh();
    },
    
    loadHotJobs: function() {
        getHotJobs({ page_size: 10 })
            .then(res => {
                if (res.success) {
                    this.setData({ hotJobs: res.data.slice(0, 6) });
                }
            })
            .catch(err => console.error(err));
    },
    
    loadTips: function() {
        // æœ¬åœ°æŠ€å·§æ•°æ®
        const tips = [
            { icon: 'ğŸ“', title: 'ç®€å†ä¼˜åŒ–', tag: 'ç®€å†æŠ€å·§' },
            { icon: 'ğŸ¯', title: 'ç²¾å‡†æŠ•é€’', tag: 'æŠ•é€’ç­–ç•¥' },
            { icon: 'ğŸ’¼', title: 'é¢è¯•ç€è£…', tag: 'å½¢è±¡ç®¡ç†' },
            { icon: 'ğŸ—£ï¸', title: 'è‡ªæˆ‘ä»‹ç»', tag: 'é¢è¯•æŠ€å·§' },
            { icon: 'ğŸ”', title: 'å…¬å¸è°ƒç ”', tag: 'é¢è¯•å‡†å¤‡' }
        ];
        this.setData({ tips });
    },
    
    checkLoginStatus: function() {
        const token = wx.getStorageSync('token');
        if (token) {
            getProfile()
                .then(res => {
                    if (res.success) {
                        this.setData({ userInfo: res.data });
                    }
                });
        }
    },
    
    onAnalyzeTap: function() {
        this.navigateToUpload('analyze');
    },
    
    onJobsTap: function() {
        wx.navigateTo({ url: '/pages/jobs/jobs' });
    },
    
    onInterviewTap: function() {
        this.navigateToUpload('interview');
    },
    
    onIntroTap: function() {
        this.navigateToUpload('intro');
    },
    
    navigateToUpload: function(type) {
        const token = wx.getStorageSync('token');
        if (!token) {
            wx.navigateTo({ url: '/pages/login/login' });
            return;
        }
        wx.navigateTo({ 
            url: `/pages/upload/upload?type=${type}` 
        });
    },
    
    onJobTap: function(e) {
        const jobId = e.currentTarget.dataset.id;
        wx.navigateTo({ 
            url: `/pages/job-detail/job-detail?id=${jobId}` 
        });
    }
});
```

---

### 3.5 å¹¿å‘Šç³»ç»Ÿè®¾è®¡

**å¹¿å‘Šä½è§„åˆ’**ï¼š

| ä½ç½® | ä»£ç  | å½¢å¼ | å°ºå¯¸ | CPMå•ä»· |
|------|------|------|------|---------|
| é¦–é¡µé¡¶éƒ¨æ¨ªå¹… | home_banner | Banner | 750Ã—200 | 15å…ƒ |
| èŒä½åˆ—è¡¨é—´éš™ | job_list | å¡ç‰‡ | 650Ã—180 | 12å…ƒ |
| åˆ†æç»“æœåº•éƒ¨ | analysis_result | é€šæ  | 650Ã—100 | 10å…ƒ |
| é¢è¯•é¢˜é¡µé¢ | interview_page | æ‚¬æµ® | 200Ã—200 | 8å…ƒ |
| èŒä½è¯¦æƒ…åº•éƒ¨ | job_detail | æ’å± | 600Ã—400 | 20å…ƒ |

**å¹¿å‘Šç®¡ç†åå°API**ï¼š
```python
@app.route('/api/admin/ads/positions', methods=['GET'])
@admin_required
def get_ad_positions():
    """è·å–å¹¿å‘Šä½åˆ—è¡¨"""
    positions = AdPosition.query.all()
    return jsonify({'success': True, 'data': [p.to_dict() for p in positions]})

@app.route('/api/admin/ads/positions', methods=['POST'])
@admin_required
def create_ad_position():
    """åˆ›å»ºå¹¿å‘Šä½"""
    data = request.json
    position = AdPosition(
        position_code=data['position_code'],
        position_name=data['position_name'],
        ad_format=data['ad_format'],
        width=data.get('width'),
        height=data.get('height')
    )
    db.session.add(position)
    db.session.commit()
    return jsonify({'success': True, 'data': position.to_dict()})

@app.route('/api/admin/ads', methods=['GET'])
@admin_required
def get_ads():
    """è·å–å¹¿å‘Šåˆ—è¡¨"""
    page = int(request.args.get('page', 1))
    per_page = int(request.args.get('per_page', 20))
    
    query = Advertisement.query
    if request.args.get('position_id'):
        query = query.filter_by(position_id=request.args.get('position_id'))
    if request.args.get('status'):
        query = query.filter_by(status=request.args.get('status'))
    
    pagination = query.order_by(Advertisement.created_at.desc()).paginate(
        page=page, per_page=per_page, error_out=False
    )
    
    return jsonify({
        'success': True,
        'data': [ad.to_dict() for ad in pagination.items],
        'total': pagination.total
    })

@app.route('/api/admin/ads', methods=['POST'])
@admin_required
def create_ad():
    """åˆ›å»ºå¹¿å‘Š"""
    data = request.json
    ad = Advertisement(
        position_id=data['position_id'],
        title=data['title'],
        content=data.get('content'),
        image_url=data.get('image_url'),
        link_url=data.get('link_url'),
        company_name=data.get('company_name'),
        start_date=data.get('start_date'),
        end_date=data.get('end_date')
    )
    db.session.add(ad)
    db.session.commit()
    return jsonify({'success': True, 'data': ad.to_dict()})

@app.route('/api/ads/show/<position_code>', methods=['POST'])
def show_ad(position_code):
    """å±•ç¤ºå¹¿å‘Š"""
    position = AdPosition.query.filter_by(
        position_code=position_code, status=1
    ).first()
    
    if not position:
        return jsonify({'success': True, 'data': None})
    
    # è·å–å½“å‰æ—¶é—´å¯ç”¨çš„å¹¿å‘Š
    now = datetime.now()
    ad = Advertisement.query.filter(
        Advertisement.position_id == position.id,
        Advertisement.status == 1,
        Advertisement.start_date <= now,
        Advertisement.end_date >= now
    ).first()
    
    if ad:
        ad.show_count += 1
        db.session.commit()
        return jsonify({'success': True, 'data': ad.to_dict()})
    
    return jsonify({'success': True, 'data': None})

@app.route('/api/ads/click/<int:ad_id>', methods=['POST'])
def click_ad(ad_id):
    """ç‚¹å‡»å¹¿å‘Š"""
    ad = Advertisement.query.get(ad_id)
    if ad:
        ad.click_count += 1
        db.session.commit()
        return jsonify({'success': True})
    return jsonify({'success': False, 'error': 'å¹¿å‘Šä¸å­˜åœ¨'})
```

**å¹¿å‘Šç»Ÿè®¡æŠ¥è¡¨**ï¼š
```python
@app.route('/api/admin/ads/report')
@admin_required
def get_ads_report():
    """è·å–å¹¿å‘ŠæŠ¥è¡¨"""
    start_date = request.args.get('start_date')
    end_date = request.args.get('end_date')
    
    query = Advertisement.query
    if start_date:
        query = query.filter(Advertisement.created_at >= start_date)
    if end_date:
        query = query.filter(Advertisement.created_at <= end_date)
    
    ads = query.all()
    
    total_shows = sum(ad.show_count for ad in ads)
    total_clicks = sum(ad.click_count for ad in ads)
    ctr = (total_clicks / total_shows * 100) if total_shows > 0 else 0
    
    return jsonify({
        'success': True,
        'data': {
            'total_shows': total_shows,
            'total_clicks': total_clicks,
            'ctr': round(ctr, 2),
            'ads_report': [ad.to_report_dict() for ad in ads]
        }
    })
```

---

### 3.6 æ”¯ä»˜ç³»ç»Ÿè®¾è®¡

**æ”¯ä»˜æµç¨‹**ï¼š
```
ç”¨æˆ·é€‰æ‹©å¥—é¤ â”€â”€â–º ç”Ÿæˆè®¢å• â”€â”€â–º å”¤èµ·æ”¯ä»˜ â”€â”€â–º å›è°ƒéªŒè¯ â”€â”€â–º å¼€é€šä¼šå‘˜
     â”‚
     â””â”€â”€ å¾®ä¿¡æ”¯ä»˜ â”€â”€â–º ç­‰å¾…ç»“æœ â”€â”€â–º é€šçŸ¥å‰ç«¯
```

**å¾®ä¿¡æ”¯ä»˜æ¥å…¥**ï¼š
```python
from wechatpayv3 import WeChatPay, WeChatPayType
from wechatpayv3.utils import RSAUtils
import httpx

class PaymentService:
    def __init__(self):
        self.wechatpay = WeChatPay(
            appid=current_app.config['WEIXIN_APP_ID'],
            mchid=current_app.config['WEIXIN_MCH_ID'],
            private_key=RSAUtils.load_private_key(
                current_app.config['WEIXIN_PRIVATE_KEY']
            ),
            cert_serial_no=current_app.config['WEIXIN_CERT_SERIAL_NO'],
            apiv3_key=current_app.config['WEIXIN_API_V3_KEY'],
            notify_url=current_app.config['WEIXIN_NOTIFY_URL']
        )
    
    def create_order(self, user_id, product_type):
        """åˆ›å»ºæ”¯ä»˜è®¢å•"""
        prices = {
            1: 1990,   # æœˆå¡ 19.9å…ƒ (åˆ†)
            2: 19900,  # å¹´å¡ 199å…ƒ (åˆ†)
            3: 49900   # ç»ˆèº« 499å…ƒ (åˆ†)
        }
        
        product_names = {
            1: 'ä¸“ä¸šç‰ˆä¼šå‘˜ï¼ˆæœˆå¡ï¼‰',
            2: 'ä¸“ä¸šç‰ˆä¼šå‘˜ï¼ˆå¹´å¡ï¼‰',
            3: 'å°Šäº«ç‰ˆä¼šå‘˜ï¼ˆç»ˆèº«ï¼‰'
        }
        
        order = Order(
            order_no=self._gen_order_no(),
            user_id=user_id,
            product_type=product_type,
            amount=prices[product_type] / 100,
            pay_type=0  # 0:å¾®ä¿¡
        )
        db.session.add(order)
        db.session.commit()
        
        # è°ƒç”¨å¾®ä¿¡ç»Ÿä¸€ä¸‹å•
        result = self.wechatpay.unified_order(
            description=product_names[product_type],
            out_trade_no=order.order_no,
            amount={'total': prices[product_type]},
            payer={'openid': self._get_user_openid(user_id)},
            appid=current_app.config['WEIXIN_APP_ID']
        )
        
        # è¿”å›æ”¯ä»˜å‚æ•°
        return {
            'order_no': order.order_no,
            'prepay_id': result['prepay_id'],
            'pay_params': self._get_pay_params(result['prepay_id'])
        }
    
    def _get_pay_params(self, prepay_id):
        """è·å–å°ç¨‹åºæ”¯ä»˜å‚æ•°"""
        params = {
            'timeStamp': str(int(time.time())),
            'nonceStr': self._gen_nonce_str(),
            'package': f'prepay_id={prepay_id}',
            'signType': 'RSA',
            'paySign': self._sign(params)
        }
        return params
    
    def _sign(self, params):
        """ç­¾å"""
        sign_str = '&'.join([f'{k}={params[k]}' for k in sorted(params.keys())])
        sign_str += f'&key={current_app.config["WEIXIN_API_V3_KEY"]}'
        return RSAUtils.sign(sign_str.encode(), self.wechatpay._private_key)
    
    def handle_notify(self, data):
        """å¤„ç†æ”¯ä»˜å›è°ƒ"""
        # éªŒç­¾
        if not self.wechatpay.verify(data):
            return {'code': 'FAIL', 'message': 'éªŒç­¾å¤±è´¥'}
        
        # æ›´æ–°è®¢å•çŠ¶æ€
        order = Order.query.filter_by(
            order_no=data['out_trade_no']
        ).first()
        
        if order and order.pay_status == 0:
            order.pay_status = 1
            order.transaction_id = data.get('transaction_id')
            order.paid_at = datetime.now()
            
            # å¼€é€šä¼šå‘˜
            user = User.query.get(order.user_id)
            if user:
                expire_time = self._calculate_expire_time(order.product_type)
                user.membership_level = order.product_type
                user.membership_expire = expire_time
            
            db.session.commit()
        
        return {'code': 'SUCCESS', 'message': 'OK'}
    
    def _calculate_expire_time(self, product_type):
        """è®¡ç®—ä¼šå‘˜åˆ°æœŸæ—¶é—´"""
        if product_type == 1:  # æœˆå¡
            return datetime.now() + timedelta(days=30)
        elif product_type == 2:  # å¹´å¡
            return datetime.now() + timedelta(days=365)
        elif product_type == 3:  # ç»ˆèº«
            return datetime.now() + timedelta(days=36500)
        return datetime.now()
    
    def _gen_order_no(self):
        """ç”Ÿæˆè®¢å•å·"""
        return f'JA{datetime.now().strftime("%Y%m%d%H%M%S")}{random.randint(1000,9999)}'
    
    def _gen_nonce_str(self):
        """ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"""
        return ''.join(random.choices(string.ascii_letters + string.digits, k=32))
    
    def _get_user_openid(self, user_id):
        """è·å–ç”¨æˆ·openid"""
        user = User.query.get(user_id)
        return user.wechat_openid if user else None
```

---

## å››ã€å¼€å‘é‡Œç¨‹ç¢‘

### Week 1 å·²å®Œæˆ âœ…
| å¤©æ•° | ä»»åŠ¡ | çŠ¶æ€ |
|------|------|------|
| Day 1-2 | è®¾è®¡è§„èŒƒ (design-system.md) | âœ… |
| Day 3 | AI åˆ†ææ¨¡å—å¢å¼º | âœ… |
| Day 4-5 | PDF å¯¼å‡ºåŠŸèƒ½ (3ç§æ¨¡æ¿) | âœ… |
| Day 6-7 | é›†æˆæµ‹è¯• | âœ… |

### Week 2 è¿›è¡Œä¸­ (ç”¨æˆ·ç³»ç»Ÿ)
| å¤©æ•° | ä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|--------|
| Day 1 | ä¾èµ–å®‰è£… + PDF æµ‹è¯• | éªŒè¯ PDF å¯¼å‡º |
| Day 2-3 | æ•°æ®åº“ç”¨æˆ·è¡¨è®¾è®¡ | users/orders/usage è¡¨ |
| Day 4 | ç”¨æˆ·æ³¨å†Œ/ç™»å½•æ¥å£ | /api/user/register, /api/user/login |
| Day 5 | ä¼šå‘˜ç³»ç»Ÿæ¥å£ | /api/user/membership |

### Phase 1ï¼šåŸºç¡€æ¶æ„å‡çº§ (ç»§ç»­)

| å¤©æ•° | ä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|--------|
| Day 6-7 | ç”¨æˆ·ç³»ç»Ÿå®Œå–„ | JWTè®¤è¯, æƒé™æ§åˆ¶ |
| Day 8 | å‰ç«¯ç”¨æˆ·ç»„ä»¶ | æ³¨å†Œ/ç™»å½•/ä¸ªäººä¸­å¿ƒé¡µé¢ |

### Phase 2ï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘

| å¤©æ•° | ä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|--------|
| Day 9-10 | æ‹›è˜APIæ¥å…¥ | /api/jobs/* çœŸå®æ•°æ®æ¥å£ |
| Day 11-12 | ä¼šå‘˜ç³»ç»Ÿ | è®¢å•ç®¡ç†, æ”¯ä»˜æµç¨‹ |
| Day 13 | æƒé™æ§åˆ¶ | å…è´¹/ä»˜è´¹åŠŸèƒ½é™åˆ¶ |

### Phase 3ï¼šå°ç¨‹åºå¼€å‘

| å¤©æ•° | ä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|--------|
| Day 14-15 | å°ç¨‹åºåŸºç¡€æ¶æ„ | é¡¹ç›®ç»“æ„, è·¯ç”±é…ç½® |
| Day 16-17 | æ ¸å¿ƒé¡µé¢å¼€å‘ | é¦–é¡µ, ä¸Šä¼ , åˆ†æç»“æœ |
| Day 18 | APIå¯¹æ¥ | requestå°è£…, ç™»å½•æ€åŒæ­¥ |

### Phase 4ï¼šå¹¿å‘Šç³»ç»Ÿ

| å¤©æ•° | ä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|--------|
| Day 19 | å¹¿å‘Šç®¡ç†åå° | å¹¿å‘Šä½é…ç½®, å¹¿å‘Šåˆ›å»º |
| Day 20 | å¹¿å‘Šå±•ç¤ºé€»è¾‘ | /api/ads/* æ¥å£, å‰ç«¯ç»„ä»¶ |

---

## äº”ã€ä¾èµ–å‡çº§æ¸…å•

**requirements.txt**:
```
Flask==3.0.0
Flask-SQLAlchemy==3.1.0
Flask-Login==0.6.3
Flask-Mail==0.9.1
PyJWT==2.8.0
pdfplumber==0.11.0
python-docx==1.1.0
Pillow==10.1.0
pytesseract==0.3.10
requests==2.31.0
reportlab==4.0.0
wechatpayv3==1.2.0
python-dotenv==1.0.0
Werkzeug==3.0.0
cryptography==41.0.0
PyMySQL==1.1.0
redis==5.0.0
celery==5.3.0
gunicorn==21.2.0
```

---

## å…­ã€éƒ¨ç½²æ¶æ„

**æ¨èé…ç½®**ï¼š

| ç»„ä»¶ | è§„æ ¼ | è¯´æ˜ |
|------|------|------|
| äº‘æœåŠ¡å™¨ | 2æ ¸4G | åŸºç¡€é…ç½® |
| æ•°æ®åº“ | MySQL 8.0 | ä¸»æ•°æ®åº“ |
| å¯¹è±¡å­˜å‚¨ | é˜¿é‡Œäº‘OSS | ç®€å†æ–‡ä»¶å­˜å‚¨ |
| CDN | é˜¿é‡Œäº‘CDN | é™æ€èµ„æºåŠ é€Ÿ |
| åŸŸå | jobhelper.com | ä¸»åŸŸå |

**Dockeréƒ¨ç½²**ï¼š
```dockerfile
FROM python:3.12-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 5000

CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "app:app"]
```

**docker-compose.yml**:
```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
      - DATABASE_URL=mysql+pymysql://user:pass@db:3306/job_assistant
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - db
      - redis
    volumes:
      - uploads:/app/uploads
      - static:/app/static

  db:
    image: mysql:8.0
    environment:
      - MYSQL_ROOT_PASSWORD=rootpass
      - MYSQL_DATABASE=job_assistant
      - MYSQL_USER=user
      - MYSQL_PASSWORD=pass
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"

volumes:
  mysql_data:
  redis_data:
  uploads:
  static:
```

---

## ä¸ƒã€é£é™©ä¸å¯¹ç­–

| é£é™© | å½±å“ | å¯¹ç­– |
|------|------|------|
| æ‹›è˜APIä¸ç¨³å®š | èŒä½æ•°æ®ç¼ºå¤± | é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ® |
| æ”¯ä»˜å›è°ƒå¤±è´¥ | ä¼šå‘˜æœªå¼€é€š | å®šæ—¶ä»»åŠ¡å¯¹è´¦ |
| å°ç¨‹åºå®¡æ ¸ä¸é€šè¿‡ | æ— æ³•å‘å¸ƒ | æå‰å‡†å¤‡èµ„è´¨ææ–™ |
| æ¶æ„ç”¨æˆ·åˆ·API | æœåŠ¡æˆæœ¬å¢åŠ  | æ¥å£é™æµ, IPé»‘åå• |
| æ•°æ®æ³„éœ² | æ³•å¾‹é£é™© | HTTPS, æ•°æ®åŠ å¯† |
| å¾®ä¿¡æ”¯ä»˜é£æ§ | æ”¯ä»˜å¤±è´¥ | å¤šæ”¯ä»˜æ¸ é“å¤‡ç”¨ |

---

## å…«ã€æ”¶ç›Šé¢„ä¼°

**å…è´¹+å¹¿å‘Šæ¨¡å¼**ï¼š
- é¢„è®¡æ—¥æ´»ç”¨æˆ·ï¼š1000
- å¹¿å‘Šç‚¹å‡»ç‡ï¼š2%
- CPMå•ä»·ï¼š10å…ƒ
- æœˆæ”¶å…¥ï¼š1000Ã—30Ã—0.02Ã—10 = 60,000å…ƒ

**ä»˜è´¹è®¢é˜…æ¨¡å¼**ï¼š
- è½¬åŒ–ç‡ï¼š5%
- ä»˜è´¹ç”¨æˆ·ï¼š50äºº/æœˆ
- å¹³å‡å®¢å•ä»·ï¼š35å…ƒ
- æœˆæ”¶å…¥ï¼š50Ã—35 = 1,750å…ƒ

**ç»„åˆæ¨¡å¼**ï¼ˆæ¨èï¼‰ï¼š
- å¹¿å‘Šæ”¶å…¥ï¼š60,000å…ƒ/æœˆ
- ä»˜è´¹è®¢é˜…ï¼š10,000å…ƒ/æœˆ
- **æœˆæ€»æ”¶å…¥ï¼šçº¦ 70,000å…ƒ**

---

## ä¹ã€å¾…åŠäº‹é¡¹ - Week 5+

### åŸºç¡€è®¾æ–½
- [ ] ç”³è¯·äº‘æœåŠ¡å™¨
- [ ] ç”³è¯·åŸŸåå¹¶å¤‡æ¡ˆ
- [ ] é…ç½®SSLè¯ä¹¦
- [ ] ç”³è¯·å¾®ä¿¡å°ç¨‹åºAppID
- [ ] ç”³è¯·å¾®ä¿¡æ”¯ä»˜å•†æˆ·å·
- [ ] ç”³è¯·æ‹›è˜APIæœåŠ¡

### åç«¯å¼€å‘
- [ ] å¹¿å‘Šç³»ç»Ÿåç«¯
- [ ] æ¥å…¥çœŸå®å¾®ä¿¡/æ”¯ä»˜å®æ”¯ä»˜SDK

### å‰ç«¯å¼€å‘
- [ ] ç”¨æˆ·ç™»å½•/æ³¨å†Œé¡µé¢
- [ ] ä¸ªäººä¸­å¿ƒé¡µé¢
- [ ] ä¼šå‘˜ä¸­å¿ƒé¡µé¢
- [ ] ç®€å†ä¸Šä¼ ç»„ä»¶ä¼˜åŒ–
- [ ] åˆ†æç»“æœé¡µé¢ä¼˜åŒ–
- [ ] èŒä½æ¨èé¡µé¢

### å°ç¨‹åºå¼€å‘
- [ ] åˆ›å»ºå°ç¨‹åºé¡¹ç›®
- [ ] å®ç°é¦–é¡µ
- [ ] å®ç°ç®€å†ä¸Šä¼ 
- [ ] å®ç°åˆ†æç»“æœå±•ç¤º
- [ ] å®ç°èŒä½æ¨è
- [ ] å®ç°ç”¨æˆ·ä¸­å¿ƒ
- [ ] å®ç°æ”¯ä»˜åŠŸèƒ½
- [ ] æäº¤å®¡æ ¸å‘å¸ƒ

### è¿è¥å‡†å¤‡
- [ ] å‡†å¤‡å¹¿å‘Šä½å†…å®¹
- [ ] ç¼–å†™ç”¨æˆ·åè®®
- [ ] ç¼–å†™éšç§æ”¿ç­–
- [ ] é…ç½®å®¢æœæ¸ é“

---

## åã€è”ç³»æ–¹å¼ä¸æ”¯æŒ

**æŠ€æœ¯æ”¯æŒ**ï¼š
- æ–‡æ¡£åœ°å€ï¼šé¡¹ç›®æ ¹ç›®å½• /improving.md
- é—®é¢˜åé¦ˆï¼šè¯·æäº¤Issue

**æ›´æ–°æ—¥å¿—**ï¼š
- 2026-01-09: åˆå§‹ç‰ˆæœ¬
- 2026-01-15: Week 4 å®Œæˆ
  - æ”¯ä»˜ç³»ç»Ÿæ¥å£å®Œæˆ
  - å•å…ƒæµ‹è¯•å®Œæˆ (test_unit.py, test_user_system.py)
  - æ›´æ–°å®Œæˆåº¦è‡³85%
- 2026-01-15: æ–‡æ¡£æ›´æ–°
  - ä¿®æ­£æ£€æŸ¥æ¸…å•çŠ¶æ€
  - æ¸…ç†é‡å¤å†…å®¹
  - æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.5*
*åˆ›å»ºæ—¥æœŸï¼š2026-01-09*
*æœ€åæ›´æ–°ï¼š2026-01-15*
