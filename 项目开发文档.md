# 求职帮助系统 - 项目开发文档

> **项目版本**: v1.5
> **最后更新**: 2026-01-15
> **开发语言**: Python 3.10+ / Flask / JavaScript (原生)

---

## 一、项目概述

### 1.1 项目名称
求职帮助系统 - 简历分析与面试助手

### 1.2 项目目标
帮助有工作经验的求职者快速分析简历、匹配岗位、准备面试，提高求职成功率。

### 1.3 核心功能
- **简历分析**：自动发现简历问题，提供优化建议
- **岗位匹配**：根据简历内容判断适合的岗位方向，分析与JD的匹配度
- **面试准备**：生成针对性面试题和自我介绍
- **用户系统**：用户注册、登录、会员订阅、使用统计
- **导出功能**：支持PDF（5种模板）、Word、HTML格式导出
- **招聘功能**：职位搜索、JD解析、热门职位推荐

### 1.4 目标用户
有工作经验的求职者（社招为主）

---

## 二、技术架构

### 2.1 技术栈

| 层级 | 技术选型 | 用途 |
|------|----------|------|
| 前端 | HTML5 + CSS3 + JavaScript (原生) | 用户界面，无构建工具，快速开发 |
| 后端 | Python 3.10 + Flask 2.x | Web服务，API接口 |
| 文件处理 | pdfplumber、python-docx、Pillow、pytesseract | PDF、Word、图片、文本解析 |
| AI能力 | 硅基流动 API (ChatGLM/Qwen等国产模型) | 简历分析、匹配度计算、面试题生成 |
| 数据存储 | SQLite（本地文件） | 轻量级存储，用户数据本地化 |

### 2.2 系统架构图

```
┌─────────────────────────────────────────────────┐
│                    用户浏览器                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │              前端 (HTML/JS/CSS)                  │   │
│  │  - 简历上传界面      - 分析结果展示              │   │
│  │  - JD输入/上传       - 面试题展示                │   │
│  │  - 用户登录/注册     - 个人中心/会员中心       │   │
│  └─────────────────────────────────────────────────┘   │
│                          │                              │
│                          ▼                              │
│  ┌─────────────────────────────────────────────────┐   │
│  │              后端服务 (Flask)                    │   │
│  │  - /api/upload      简历上传与解析              │   │
│  │  - /api/analyze     简历分析                    │   │
│  │  - /api/match       岗位匹配                    │   │
│  │  - /api/interview   面试题生成                  │   │
│  │  - /api/self-intro  自我介绍生成                │   │
│  │  - /api/user/*     用户系统（注册/登录/会员）    │   │
│  │  - /api/payment/*  支付系统                  │   │
│  └─────────────────────────────────────────────────┘   │
│                          │                              │
│            ┌─────────┴─────────┐              │
│            │                  │              │
│   ┌─────────┴─────────┐   │        │
│   │                  │   │
│  ▼  ▼           ▼   │
│ 硅基流动   SQLite    │
│  (AI分析)     (数据库)  │
└──────────────────────────────┘
```

---

## 三、目录结构

```
求职帮助系统/
├── app.py                 # Flask主应用 (路由和API)
├── config.py              # 配置文件 (API密钥管理)
├── requirements.txt       # Python依赖
├── README.md              # 项目说明
├── 启动服务器.bat         # Windows启动脚本
│
├── static/                # 前端静态资源
│   ├── css/            # 样式文件
│   ├── js/             # 前端逻辑
│   │   └── main.js      # 主JavaScript文件
│   └── index.html      # 单页应用界面
│
├── templates/             # Flask模板
│   └── index.html      # 主页面（与static/index.html重复，考虑合并）
│
├── uploads/               # 上传的简历文件
├── data/                 # SQLite数据库
│   └── jobhelper.db    # 用户数据和简历数据
│
├── utils/                # 工具模块
│   ├── __init__.py
│   ├── file_parser.py    # 文件解析(PDF/Word/OCR)
│   ├── ai_client.py      # AI API调用
│   ├── analyzer.py       # 简历分析和匹配
│   ├── pdf_exporter.py   # PDF导出 (5种模板)
│   ├── doc_exporter.py   # Word/HTML导出
│   ├── comparator.py      # 简历对比分析
│   ├── job_client.py     # 招聘API客户端
│   └── payment_service.py # 支付服务
│
└── test_*.py             # 测试文件
    ├── test_unit.py      # 单元测试
    ├── test_user_system.py # 用户系统测试
    └── test_user_auth.py # 前端用户认证集成测试
```

---

## 四、API接口文档

### 4.1 公共接口

#### 4.1.1 API状态检查
```
GET /api/status
响应: { success: true, models: [...], message: "..." }
```

#### 4.1.2 配置管理
```
GET /api/config          # 获取配置
POST /api/config/test    # 测试API连接
POST /api/config/save    # 保存配置
```

### 4.2 简历相关接口

#### 4.2.1 简历上传
```
POST /api/upload
请求: multipart/form-data
参数: file (文件)
响应: { success: true, data: { resume_id: 1, filename: "...", parsed_data: {...} }
```

#### 4.2.2 简历列表
```
GET /api/resumes
响应: { success: true, data: [{id, filename, created_at, ...}] }
```

#### 4.2.3 删除简历
```
DELETE /api/resumes/<id>
需要认证: Bearer Token
```

#### 4.2.4 简历分析
```
POST /api/analyze
请求: { resume_id: 1 }
需要认证: Bearer Token (推荐)
响应: { success: true, data: { score, strengths, weaknesses, suggestions, ... } }
```

#### 4.2.5 岗位匹配
```
POST /api/match
请求: { resume_id: 1, jd_text: "..." }
需要认证: Bearer Token (推荐)
响应: { success: true, data: { match_score, matched_skills, missing_skills, ... } }
```

#### 4.2.6 面试题生成
```
POST /api/interview
请求: { resume_id: 1, jd_text: "..." }
需要认证: Bearer Token (推荐)
响应: { success: true, data: { interview_questions: [...] } }
```

#### 4.2.7 自我介绍生成
```
POST /api/self-intro
请求: { resume_id: 1, jd_text: "..." }
需要认证: Bearer Token (推荐)
响应: { success: true, data: { short_intro, long_intro } }
```

#### 4.2.8 简历导出
```
POST /api/resumes/<id>/export-pdf
请求: { template: "modern/business/..." }
响应: PDF文件下载

POST /api/resumes/<id>/export-word
请求: {}
响应: .docx文件下载

POST /api/resumes/<id>/export-html
请求: {}
响应: .html文件下载
```

### 4.3 用户系统接口

#### 4.3.1 用户注册
```
POST /api/user/register
请求: { username, email, password, phone }
响应: { success: true, data: { token, user: {...} }
```

#### 4.3.2 用户登录
```
POST /api/user/login
请求: { email, password }
响应: { success: true, data: { token, user: {...} }
```

#### 4.3.3 获取用户资料
```
GET /api/user/profile
需要认证: Bearer Token
响应: { success: true, data: { id, username, email, phone, avatar_url, membership_level, ... } }
```

#### 4.3.4 更新用户资料
```
PUT /api/user/profile
需要认证: Bearer Token
请求: { username?, phone?, avatar_url? }
响应: { success: true, data: {...} }
```

#### 4.3.5 获取会员信息
```
GET /api/user/membership
需要认证: Bearer Token
响应: { success: true, data: { level, expire_time, ... } }
```

#### 4.3.6 获取使用统计
```
GET /api/user/usage
需要认证: Bearer Token
响应: { success: true, data: { today_count, remaining, daily_limit } }
```

#### 4.3.7 退出登录
```
POST /api/user/logout
需要认证: Bearer Token
响应: { success: true, message: "已退出登录" }
```

### 4.4 支付系统接口

#### 4.4.1 创建订单
```
POST /api/payment/create-order
需要认证: Bearer Token
请求: { product_type: 1|2|3, pay_type: 0|1 }
响应: { success: true, data: { order_no, amount, ... } }
```

#### 4.4.2 支付回调
```
POST /api/payment/notify
请求: 微信/支付宝支付回调数据
响应: { success: true }
```

#### 4.4.3 订单查询
```
GET /api/payment/query-order/<order_no>
需要认证: Bearer Token
响应: { success: true, data: { status, pay_time, ... } }
```

### 4.5 招聘相关接口

#### 4.5.1 获取热门职位
```
GET /api/jobs/hot
响应: { success: true, data: [{title, company, salary, ...}] }
```

#### 4.5.2 搜索职位
```
GET /api/jobs/search?keywords=...&location=...&page=1
响应: { success: true, data: { jobs: [...], page, total } }
```

#### 4.5.3 JD解析
```
POST /api/jobs/parse-jd
请求: { jd_text: "..." }
响应: { success: true, data: { title, company, requirements, skills, ... } }
```

### 4.6 简历对比接口

```
POST /api/resumes/compare
需要认证: Bearer Token
请求: { resume1_id: 1, resume2_id: 2, jd_text: "..." }
响应: { success: true, data: { overall_score, skill_comparison, ... } }
```

---

## 五、前端功能说明

### 5.1 JWT Token 管理

**Token存储**：使用 `localStorage` 持久化 JWT Token

**核心函数**：
```javascript
// Token管理
function getToken()         // 从localStorage获取Token
function setToken(token)     // 保存Token到localStorage
function clearToken()       // 清除Token
function isAuthenticated()  // 检查是否已登录

// 自动注入Authorization头
async function fetchWithAuth(url, options = {}) {
    const token = getToken();
    const headers = options.headers || {};
    if (token) {
        headers['Authorization'] = `Bearer ${token}`;
    }
    return fetch(url, { ...options, headers });
}
```

### 5.2 用户认证

**登录/注册模态框**：
- 支持邮箱登录和注册
- 表单验证（用户名长度、密码长度、邮箱格式）
- 登录/注册后自动获取用户资料
- 成功后保存Token并更新头部用户状态

**个人中心**：
- 查看/编辑用户资料（用户名、手机号、头像URL）
- 显示会员等级、注册时间
- 受保护路由，未登录自动跳转登录

**会员中心**：
- 查看当前会员等级（免费/专业版/尊享版）
- 查看会员到期时间
- 查看使用统计（今日分析、剩余次数、每日限制）
- 创建订单（月卡/年卡/终身卡）

**退出登录**：
- 清除本地Token
- 重置用户状态
- 关闭所有模态框

### 5.3 模态框交互

**点击外部关闭**：
- 所有模态框（登录/个人中心/会员中心/配置）支持点击背景区域关闭
- 下拉菜单支持点击外部关闭

### 5.4 页面功能

**简历管理**：
- 简历列表展示
- 选择/删除简历
- 简历上传（支持PDF/Word/TXT/图片OCR）

**分析功能**：
- 简历分析结果展示
- 岗位匹配结果展示
- 面试题展示（含参考答案）
- 自我介绍生成（1分钟/3分钟版本）

**导出功能**：
- PDF模板选择（modern/business/creative/classic/compact）
- Word/HTML格式导出

---

## 六、后端功能模块

### 6.1 用户系统模块

**数据库表**：
- `users`：用户表（id, username, email, password_hash, phone, avatar_url, membership_level, membership_expire, created_at）
- `orders`：订单表（id, user_id, product_type, amount, order_no, status, pay_time）
- `analysis_usage`：使用统计表（id, user_id, date, count, daily_limit）

**认证机制**：
- JWT Token（有效期24小时）
- 登录装饰器 `@login_required` 用于保护接口
- Token自动注入到Authorization头

### 6.2 支付系统模块

**订单创建**：
- 支持月卡（product_type=1，19.9元/月）
- 支持年卡（product_type=2，199.0元/年）
- 支持终身卡（product_type=3，499.0元/终身）
- 支持微信支付（pay_type=0）和支付宝支付（pay_type=1）

**支付回调**：
- 模拟支付回调（待接入真实SDK）
- 更新用户会员等级和到期时间

### 6.3 招聘API模块

**数据来源**：
- 模拟热门职位数据
- 模拟职位搜索结果

**功能**：
- 获取热门职位推荐
- 职位搜索（关键词、地区、分类）
- JD文本解析

---

## 七、使用说明

### 7.1 环境要求

- Python 3.10+
- 4GB+ 内存
- Windows/Linux/MacOS
- 现代浏览器（Chrome/Edge/Firefox）

### 7.2 安装步骤

```bash
# 1. 创建虚拟环境
python -m venv venv

# 2. 激活虚拟环境
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# 3. 安装依赖
pip install -r requirements.txt

# 4. 配置API密钥
# 编辑 config.py，修改 API_KEY

# 5. 启动应用
# Windows:
启动服务器.bat
# Linux/Mac:
python app.py

# 6. 访问应用
浏览器打开: http://localhost:5000
```

### 7.3 依赖列表 (requirements.txt)

```
Flask==3.0.0
pdfplumber==0.11.0
python-docx==1.1.0
Pillow==10.1.0
pytesseract==0.3.10
requests==2.31.0
PyJWT==2.8.0
sqlite-utils==3.35
```

---

## 八、开发规范

### 8.1 代码风格

- 使用PEP 8 Python代码风格
- 使用原生JavaScript（ES6+）
- 函数命名使用驼峰式（camelCase）
- 中文注释清晰完整

### 8.2 API响应格式

**成功响应**：
```json
{
  "success": true,
  "data": {
    // 业务数据
  }
}
```

**错误响应**：
```json
{
  "success": false,
  "error": "错误信息"
}
```

### 8.3 数据库规范

- 表名使用复数形式（users, resumes, orders）
- 字段名使用下划线分隔（user_id, file_name）
- 时间字段使用ISO 8601格式（created_at, updated_at）

---

## 九、版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2026-01-09 | 初始版本，核心功能上线 |
| v1.1 | 2026-01-15 | 新增PDF模板(2个)、Word/HTML导出、招聘API、简历对比 |
| v1.5 | 2026-01-15 | 前端用户系统完成（登录/注册/个人中心/会员中心）、总体进度90% |

---

## 十、待办事项

### 10.1 短期计划（Week 5+）

#### 后端开发
- [ ] 广告系统后端
- [ ] 接入真实微信/支付宝支付SDK
- [ ] 优化数据库查询性能

#### 前端开发
- [ ] 简历上传组件优化（进度条、错误提示）
- [ ] 分析结果页面优化（分页、筛选）
- [ ] 职位推荐页面

#### 运营准备
- [ ] 申请云服务器
- [ ] 申请域名并备案
- [ ] 配置SSL证书
- [ ] 编写用户协议
- [ ] 编写隐私政策

### 10.2 长期计划（Month 2+）

#### 小程序开发
- [ ] 创建小程序项目
- [ ] 实现首页
- [ ] 实现简历上传
- [ ] 实现分析结果展示
- [ ] 实现职位推荐
- [ ] 实现用户中心
- [ ] 实现支付功能
- [ ] 提交审核发布

#### 商业化
- [ ] 接入真实支付SDK
- [ ] 开发广告变现功能
- [ ] 建立付费订阅模式

---

*文档版本: v1.0*
*创建日期: 2026-01-15*
*作者: AI Assistant*
